#include <Servo.h>
#include "pitches.h"

// START of code

// Set up variables for scenes A -> E.
// Scene 1A.
Servo servo1;
const int buttonAPin = 8;
int buttonAState = 0;
int lastButtonAState = 0;
bool A = false;

// Scene 2B.
Servo servo2;
const int buttonBPin = 9;
int buttonBState = 0;
int lastButtonBState = 0;
bool B = false;

// Scene 3C.
Servo servo3;
const int buttonCPin = 10;
int buttonCState = 0;
int lastButtonCState = 0;
bool C = false;

// Scene 4D.
Servo servo4;
const int buttonDPin = 11;
int buttonDState = 0;
int lastButtonDState = 0;
bool D = false;

// Scene 5E
const int PiezoPin = 3;
const int buttonEPin = 12;
int buttonEState = 0;
int lastButtonEState = 0;
bool E = false;

int Melody[] = {
  NOTE_D5, NOTE_D5, NOTE_B5, NOTE_A5,
  NOTE_D5, NOTE_D5, NOTE_B5, NOTE_A5,
  NOTE_G5, NOTE_G5, NOTE_G5,
  NOTE_FS5, NOTE_FS5, NOTE_FS5,
  NOTE_E5, NOTE_E5, NOTE_E5,
  NOTE_D5, NOTE_CS5, NOTE_D5, NOTE_CS5, NOTE_D5, NOTE_CS5
  NOTE_FS5, NOTE_CS5, NOTE_B4

}


int sunrisenoteDurations[] = {
  3, 3, 2, 1,
  3, 3, 2, 1,
  3.5, 3.5, 3.5,
  3.5, 3.5, 3.5,
  3.5, 3.5, 3.5,
  4, 3.5, 4, 3.5, 4, 3.5, 2, 2, 2,
  
}

void setup() {
  // Attach servos and buttons for scenes A -> E.
  servo1.attach(12);
  pinMode(buttonAPin, INPUT);
  servo2.attach(13);
  pinMode(buttonBPin, INPUT);
  servo3.attach(7);
  pinMode(buttonCPin, INPUT);
  servo4.attach(6);
  pinMode(buttonDPin, INPUT);

 
  // Sets all servos to initial angle.
  servo1.write(120);
  servo2.write(0);
  servo3.write(90);
  servo4.write(90);

  // Set up Piezo.
  pinMode(PiezoPin, OUTPUT);

}

// MELODY

void playMelody() {
  for (int thisNote = 0; thisNote < 7; thisNote++) {
    int noteDuration = 1000 / noteDurations[thisNote];
    tone(buzzerPin, melody[thisNote], noteDuration);

    int pauseBetweenNotes = noteDuration * 1.30;
    delay(pauseBetweenNotes);
    
    noTone(buzzerPin)
  }
}

// SCENES

void loop() {
// SCENE 1A START
  buttonAState = digitalRead(buttonAPin);
    if (buttonAState != lastButtonAState) {
      if (buttonAState == HIGH) {
        A = true;
        servo1.write(50); 
        delay(30); 
      }
    }

// SCENE 2B START
    if (A== true) {
      buttonBState = digitalRead(buttonBPin);
      if (buttonBState != lastButtonBState) {
        if (buttonBState == HIGH) {
          B = true;
          servo2.write(180);
          delay(15);
        }
      }
    }

// SCENE 3C START
    if (B== true) {
      buttonCState = digitalRead(buttonCPin);
      if (buttonCState != lastButtonCState) {
        if (buttonCState == HIGH) {
          C = true;
          delay(500);
          servo3.write(100);
        }
      }
    }
// SCENE 4D START
    if (C== true) {
      buttonDState = digitalRead(buttonDPin);
      if (buttonDState != lastButtonDState) {
        if (buttonDState == HIGH) {
          D = true;
          servo4.write(100);
          delay(1600);
          servo4.write(90);
        }
      }
    }

// SCENE 5E START
  if (D== true) {
      buttonEState = digitalRead(buttonEPin);
      if (buttonEState != lastButtonEState) {
        if (buttonEState == HIGH) {
          E = true;
          playMelody();
        }
      }
    }
}

// END of code
